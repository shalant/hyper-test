import{c as S,x as r,y as h}from"./chunk-RPOCAZ2N.js";import{Ad as I,Ua as x,dd as k,ma as f,sa as l,u as d}from"./chunk-M2USPBIP.js";var y=r("[Authentication] Register",h()),D=r("[Authentication] Register Success",h()),U=r("[Authentication] Register Failure",h()),v=r("[Authentication] Login",h()),E=r("[Authentication] Login Success",h()),w=r("[Authentication] Login Failure",h()),L=r("[Authentication] Logout"),j=r("[Auth] Logout Success");var A=(()=>{let i=class i{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=I(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),i.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);let o=i.getCookieRegExp(e).exec(this.document.cookie);return o[1]?i.safeDecodeURIComponent(o[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(o=>{let[c,n]=o.split("=");e[i.safeDecodeURIComponent(c.replace(/^ /,""))]=i.safeDecodeURIComponent(n)}),e}set(e,t,o,c,n,a,m){if(!this.documentIsAccessible)return;if(typeof o=="number"||o instanceof Date||c||n||a||m){let g={expires:o,path:c,domain:n,secure:a,sameSite:m||"Lax"};this.set(e,t,g);return}let p=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",s=o||{};if(s.expires)if(typeof s.expires=="number"){let g=new Date(new Date().getTime()+s.expires*1e3*60*60*24);p+="expires="+g.toUTCString()+";"}else p+="expires="+s.expires.toUTCString()+";";s.path&&(p+="path="+s.path+";"),s.domain&&(p+="domain="+s.domain+";"),s.secure===!1&&s.sameSite==="None"&&(s.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),s.secure&&(p+="secure;"),s.sameSite||(s.sameSite="Lax"),p+="sameSite="+s.sameSite+";",this.document.cookie=p}delete(e,t,o,c,n="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:a,path:t,domain:o,secure:c,sameSite:n})}deleteAll(e,t,o,c="Lax"){if(!this.documentIsAccessible)return;let n=this.getAll();for(let a in n)n.hasOwnProperty(a)&&this.delete(a,e,t,o,c)}};i.\u0275fac=function(t){return new(t||i)(l(k),l(x))},i.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"});let u=i;return u})();var H=(()=>{let i=class i{constructor(e,t){this.http=e,this.cookieService=t,this.user=null,this.authSessionKey="_HYPER_AUTH"}currentUser(){return this.cookieService.get(this.authSessionKey)}login(e,t){return this.http.post("/api/login",{email:e,password:t}).pipe(d(o=>(o&&o.token&&(this.user=o,this.cookieService.set(this.authSessionKey,JSON.stringify(o.token),1,"/")),o)))}signup(e,t,o){return this.http.post("/api/signup",{name:e,email:t,password:o}).pipe(d(c=>c))}logout(){this.cookieService.delete(this.authSessionKey),this.user=null}};i.\u0275fac=function(t){return new(t||i)(l(S),l(A))},i.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"});let u=i;return u})();export{y as a,D as b,U as c,v as d,E as e,w as f,L as g,j as h,A as i,H as j};
